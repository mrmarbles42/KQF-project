View(temp_precip)
temp_precip <- temp_precip %>%
mutate(month = lubridate::month(date),
year = lubridate::year(date)) %>%
#filter for years of interest
filter(year %in% c(2012:2018))
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x")
vis_dat(fruit_data_combined)
View(points)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year"))
View(points)
points <- points %>%
mutate(year = as.numeric(date_year)) %>%
select(-date_year)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year"))
View(fruit_data_combined)
View(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fungicide_use)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
pest_data_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog,
pre_points,final_points)
pest_data_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month_0"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog,
pre_points,final_points)
View(temp_precip)
temp_precip$month_0 <- temp_precip$month
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(pest_data_combined)
vis_dat(pest_data_combined)
View(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month" = "month_0")) %>%
rename("date" = "date.x") %>%
#join points on year col
full_join(points, by = c("year")) %>%
#Remove duplicates fruit data
unique()
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
vis_dat(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_combined)
vis_dat(fruit_data_combined)
sum(if_else(duplicated(fruit_data_combined) = T, 1, 0))
sum(if_else(duplicated(fruit_data_combined) == T, 1, 0))
duplicated(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
ab2 <- lme4::lmer(log_rot ~ temp_10 + precip_10 + variety +(1 | bog),
data = fruit_data_wide)
ab2
#pt_10_variety
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
summary(ab1)
summary(ab2)
ab3 <- summary(ab2)
ab3$coefficients
table(ab3$coefficients)
data.frame(ab3$coefficients)
lmer_coef <- data.frame(ab3$coefficients)
View(lmer_coef)
source(here("code", "kqf_clean.R"))
library(here)
source(here("code", "kqf_clean.R"))
View(fruit_data_wide)
rm(points,
temp_precip)
vis_dat(fruit_data_wide)
vis_dat(pest_data_combined)
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
pt_10_bog <- lme4::lmer(log_rot ~ temp_10 + precip_10 + (1 | bog),
data = fruit_data_wide)
library(broom)
tidy(pt_10_bog)
#pt_10_variety
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
m_9 <- lme4::lmer(log_rot ~ temp_9 + precip_9 + (1 | bog),
data = fruit_data_wide)
#NLME----
m_10 <- lme4::lmer(log_rot ~ temp_10 + precip_10 + (1 | bog),
data = fruit_data_wide)
m_11 <- lme4::lmer(log_rot ~ temp_11 + precip_11 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
fruit_data_wide %>%
nest(-grower)
grow_nest <- fruit_data_wide %>%
nest(-grower)
View(grow_nest)
View(grow_nest[[2]][[94]])
vis_dat(grow_nest)
View(grow_nest[[2]][[91]])
grow_nest <- fruit_data_wide %>%
nest(-grower, -bog)
View(grow_nest)
View(grow_nest)
View(grow_nest[[3]][[5]])
grow_nest <- fruit_data_wide %>%
nest(-grower)
View(grow_nest)
View(grow_nest)
View(grow_nest[[2]][[70]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
summary(m_9)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | variety),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 ,
data = fruit_data_wide)
summary(m_10)
summary(m_11)
#rot by kqf
kqf_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#rot by kqf
fruit_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#rot by kqf
fruit_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
droplevels(as.factor(.$final_points)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#source(here("code", "kqf_clean.R"))
source(here("code", "kqf_analysis.R"))
nlme_coef <- read_csv(here("data", "kqf_nlme_coef - Sheet1.csv"))
View(nlme_coef)
nlme_coef %>%
ggplot(aes(month, temp)) + geom_point()
ggplot(aes(month, abs(temp)) +
nlme_coef %>%
ggplot(aes(month, abs(temp))) +
geom_point() +
scale_y_continuous()
nlme_coef %>%
nlme_coef %>%
ggplot(aes(month, abs(temp))) +
geom_point()
nlme_coef %>%
ggplot(aes(month, abs(as.numeric(temp)))) +
geom_point()
nlme_coef %>%
ggplot(aes(month %in% c(9,10,11), abs(as.numeric(temp)))) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0:10)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0.0:10.0)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0.0:10.0)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = month)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = precip)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = scale(precip))
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_bar()
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_plots.R", echo=TRUE)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_line() +
geom_point()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_point() +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
ylim(-10,10)
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point()
+
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
kqf_data_combined %>%
filter(rot_pct != 0 & data_source == "decas") %>%
ggplot(aes(log_rot)) +
geom_freqpoly()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
stat_count() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
ggplot(aes(as.factor(month), as.numeric(precip)) +
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
sdf
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
fruit_data_wide %>%
nest(-variety)
fruit_data_wide %>%
group_by(bog,grower)
fruit_data_wide %>%
group_by(bog)
1-pt(abs(-0.474), df = 30)
1-pt(abs(-0.474), df = 300)
1-pt(abs(-1.796), df = 30)
1-pt(abs(1.09), df = 30)
1-pt(abs(6.807), df = 30)
1-pt(abs(-8.425), df = 30)
1-pt(abs(-3.268), df = 30)
1-pt(abs(-1.796), df = 300)
summary(m_10)
1-pt(abs(-1.796), df = 2313)
1-pt(abs(-1.796), df = 398)
1-pt(abs(-1.796), df = 2312)
lme4::lmer(log_rot ~ temp_3 + precip_3 + (1 | bog),
data = fruit_data_wide)
lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
nlme_coef <- read_csv(here("data", "kqf_nlme_coef - Sheet1.csv"))
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_plots.R", echo=TRUE)
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef <- read_csv(here("data", "kqf_nlme_coef - Sheet1.csv"))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), abs(as.numeric(precip)))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef$temp <- abs(as.numeric(nlme_coef$temp))
View(nlme_coef)
nlme_coef$precip <- abs(as.numeric(nlme_coef$precip))
ggplot(aes(as.factor(month), precip) +
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
a
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(precip)) +
geom_bar() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(precip)) +
geom_bar() +
scale_y_continuous(limits = c(-10,10), breaks = c(0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(precip)) +
geom_bar()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(precip, color = temp)) +
geom_bar()
as.factor(month),
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_linne() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_line() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_smooth() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(0, (sum(precip)/3), 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(min(precip) -1, (sum(precip)/3), max(precip) + 1))
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
#pt_10_variety
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + (1 | bog),
data = fruit_data_wide)
grow_nest <- fruit_data_wide %>%
nest(-grower)
View(grow_nest)
View(grow_nest[[2]][[3]])
summary(m_10)
summary(m_11)
summary(m_9
summary(m_9)
summary(m_9)
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(min(precip) -0.1, (sum(precip)/3), max(precip) + 0.1))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(0, (sum(precip)/3), 10))
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
# fruit_decas)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_decas)
levels(fruit_decas$month)
levels(as.factor(fruit_decas$month))
require(here)
#source(here("code", "kqf_clean.R"))
source(here("code", "kqf_analysis.R"))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(0,10), breaks = c(0, (sum(precip)/3), 10))
summary(m_9)
summary(m_10)
summary(m_11)
View(fruit_data_wide)
View(temp_precip)
levels(as.factor(temp_precip))
#climate parameters 2003-2020----
#data import
temp_precip <- fread(here("data/base_files", "kqf_temp_precip.csv"))
View(temp_precip)
fruit_data_wide %>%
q''
View(fruit_data_wide)
filter(month = 10, year = 2006)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_decas)
glimpse(fruit_decas)
fruit_data_wide %>%
ggplot(aes(year)) +
geom_boxplot()
View(fruit_decas)
fruit_data_wide %>%
ggplot(aes(year, temp_10)) +
geom_boxplot()
fruit_data_wide %>%
ggplot(aes(as.factor(year), temp_10)) +
geom_boxplot()
fruit_data_wide %>%
filter(year %in% 2012:2018)
fruit_data_wide %>%
filter(year %in% 2012:2018) %>%
ggplot(aes(as.factor(year), temp_10)) +
geom_boxplot()
fruit_data_wide %>%
filter(year %in% 2012:2018) %>%
ggplot(aes(as.factor(year), temp_11)) +
geom_boxplot()
summary(m_9)
summary(m_10)
summary(m_11)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
summary(m_9)
summary(m_10)
summary(m_11)
View(m_9)
View(m_11)
hist(resid(m_9))
hist(resid(m_10))
hist(resid(m_11))
qqnorm(resid(m_10))
qqnorm(resid(m_11))
qqnorm(resid(m_9))
plot(resid(m_10), predict())
plot(resid(m_10), predict(m_10))
plot(resid(m_11), predict(m_11))
plot(resid(m_9), predict(m_9))
ls()
a <- data.frame([c(1,2,3,4)])
12l
12L
class(12.123)
