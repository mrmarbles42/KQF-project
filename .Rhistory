log_rot = log10(rot_pct + 1) ,
variety = fct_collapse(variety, other = other_varieties),
year = lubridate::year(date),
month = lubridate::month(date),
##create data_source column
data_source = as.factor("decas")
) %>%
##relocate date column to [,1]
relocate(date)
other_varieties = c("OE","ORST","OH",
"OM","GR","OB",
"SN","MC","SK",
"ORHO","OS","MX",
"GD","PD")
source(here("code", "kqf_import.R"))
##date manipulation
fruit_decas$date <- parse_date_time(fruit_decas$date, "mdy")
fruit_decas <- fruit_decas %>%
##exclude rows w/ NA values in rot
filter(is.na(rot_pct) == F) %>%
##create log_rot / year / month columns and collapse varieties by frequency
mutate(
log_rot = log10(rot_pct + 1) ,
variety = fct_collapse(variety, other = other_varieties),
year = lubridate::year(date),
month = lubridate::month(date),
##create data_source column
data_source = as.factor("decas")
) %>%
##relocate date column to [,1]
relocate(date)
other_varieties = c("OE","ORST","OH",
"OM","GR","OB",
"SN","MC","SK",
"ORHO","OS","MX",
"GD","PD")
fruit_decas <- fruit_decas %>%
##exclude rows w/ NA values in rot
filter(is.na(rot_pct) == F) %>%
##create log_rot / year / month columns and collapse varieties by frequency
mutate(
log_rot = log10(rot_pct + 1) ,
variety = fct_collapse(variety, other = other_varieties),
year = lubridate::year(date),
month = lubridate::month(date),
##create data_source column
data_source = as.factor("decas")
) %>%
##relocate date column to [,1]
relocate(date)
View(fruit_decas)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
fruit_data_unique$month_2 <- fruit_data_unique$month
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
View(fruit_data_wide)
View(fruit_data_unique)
temp_precip$month_2 <- temp_precip$month
temp_precip_pivot <- temp_precip %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
#precipitation pivot
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip)
View(temp_precip_pivot)
vis_dat(temp_precip_pivot)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
#temperatures 2003-2021----
temp_precip$month_2 <- temp_precip$month
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
View(fungicide_use)
temp_precip$month_join <- temp_precip$month
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
glimpse(temp_precip)
glimpse(fungicide_use)
View(fruit_decas)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
source(here("code", "kqf_import.R"))
#temperatures 2003-2021----
temp_precip$month_2 <- temp_precip$month
View(temp_precip)
glimpse(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(pest_data_combined)
temp_precip <- temp_precip %>%
mutate(month = lubridate::month(date),
year = lubridate::year(date)) %>%
#filter for years of interest
filter(year %in% c(2012:2018))
temp_precip$month_2 <- temp_precip$month
temp_precip$month_0 <- temp_precip$month
temp_precip <- temp_precip %>%
#temp pivot
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
#precipitation pivot
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip)
View(temp_precip)
vis_dat(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(temp_precip)
temp_precip <- temp_precip %>%
mutate(month = lubridate::month(date),
year = lubridate::year(date)) %>%
#filter for years of interest
filter(year %in% c(2012:2018))
temp_precip$month_2 <- temp_precip$month
temp_precip$month_0 <- temp_precip$month
temp_precip <- temp_precip %>%
#temp pivot
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
#precipitation pivot
pivot_wider(names_from = month,
names_prefix = "precip_",
values_from = tot_precip)
temp_precip <- temp_precip %>%
#temp pivot
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
#precipitation pivot
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_combined)
View(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
View(temp_precip)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_data_combined)
vis_dat(fruit_data_combined)
temp_precip <- temp_precip %>%
mutate(month = lubridate::month(date),
year = lubridate::year(date)) %>%
#filter for years of interest
filter(year %in% c(2012:2018))
temp_precip$month_2 <- temp_precip$month
temp_precip$month_0 <- temp_precip$month
source(here("code", "kqf_import.R"))
source(here("code", "kqf_import.R"))
#Decas fruit data 2013-2018----
##date manipulation
fruit_decas$date <- parse_date_time(fruit_decas$date, "mdy")
##collapsed varieties vector
other_varieties = c("OE","ORST","OH",
"OM","GR","OB",
"SN","MC","SK",
"ORHO","OS","MX",
"GD","PD")
fruit_decas <- fruit_decas %>%
##exclude rows w/ NA values in rot
filter(is.na(rot_pct) == F) %>%
##create log_rot / year / month columns and collapse varieties by frequency
mutate(
log_rot = log10(rot_pct + 1) ,
variety = fct_collapse(variety, other = other_varieties),
year = lubridate::year(date),
month = lubridate::month(date),
##create data_source column
data_source = as.factor("decas")
) %>%
##relocate date column to [,1]
relocate(date)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x")
View(temp_precip)
temp_precip <- temp_precip %>%
mutate(month = lubridate::month(date),
year = lubridate::year(date)) %>%
#filter for years of interest
filter(year %in% c(2012:2018))
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x")
vis_dat(fruit_data_combined)
View(points)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year"))
View(points)
points <- points %>%
mutate(year = as.numeric(date_year)) %>%
select(-date_year)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year"))
View(fruit_data_combined)
View(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fungicide_use)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
pest_data_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog,
pre_points,final_points)
pest_data_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month_0"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog,
pre_points,final_points)
View(temp_precip)
temp_precip$month_0 <- temp_precip$month
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(pest_data_combined)
vis_dat(pest_data_combined)
View(temp_precip)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month" = "month_0")) %>%
rename("date" = "date.x") %>%
#join points on year col
full_join(points, by = c("year")) %>%
#Remove duplicates fruit data
unique()
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
vis_dat(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_combined)
vis_dat(fruit_data_combined)
sum(if_else(duplicated(fruit_data_combined) = T, 1, 0))
sum(if_else(duplicated(fruit_data_combined) == T, 1, 0))
duplicated(fruit_data_combined)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
ab2 <- lme4::lmer(log_rot ~ temp_10 + precip_10 + variety +(1 | bog),
data = fruit_data_wide)
ab2
#pt_10_variety
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
summary(ab1)
summary(ab2)
ab3 <- summary(ab2)
ab3$coefficients
table(ab3$coefficients)
data.frame(ab3$coefficients)
lmer_coef <- data.frame(ab3$coefficients)
View(lmer_coef)
source(here("code", "kqf_clean.R"))
library(here)
source(here("code", "kqf_clean.R"))
View(fruit_data_wide)
rm(points,
temp_precip)
vis_dat(fruit_data_wide)
vis_dat(pest_data_combined)
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
pt_10_bog <- lme4::lmer(log_rot ~ temp_10 + precip_10 + (1 | bog),
data = fruit_data_wide)
library(broom)
tidy(pt_10_bog)
#pt_10_variety
ab2 <- lme4::lmer(log_rot ~ temp_1 + precip_1 + variety +(1 | bog),
data = fruit_data_wide)
m_9 <- lme4::lmer(log_rot ~ temp_9 + precip_9 + (1 | bog),
data = fruit_data_wide)
#NLME----
m_10 <- lme4::lmer(log_rot ~ temp_10 + precip_10 + (1 | bog),
data = fruit_data_wide)
m_11 <- lme4::lmer(log_rot ~ temp_11 + precip_11 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
fruit_data_wide %>%
nest(-grower)
grow_nest <- fruit_data_wide %>%
nest(-grower)
View(grow_nest)
View(grow_nest[[2]][[94]])
vis_dat(grow_nest)
View(grow_nest[[2]][[91]])
grow_nest <- fruit_data_wide %>%
nest(-grower, -bog)
View(grow_nest)
View(grow_nest)
View(grow_nest[[3]][[5]])
grow_nest <- fruit_data_wide %>%
nest(-grower)
View(grow_nest)
View(grow_nest)
View(grow_nest[[2]][[70]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
View(grow_nest[[2]][[56]])
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
summary(m_9)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | variety),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
m_12 <- lme4::lmer(log_rot ~ temp_12 + precip_12 ,
data = fruit_data_wide)
summary(m_10)
summary(m_11)
#rot by kqf
kqf_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#rot by kqf
fruit_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#rot by kqf
fruit_data_wide %>%
group_by(final_points) %>%
mutate(mean_rot = mean(rot_pct)) %>%
droplevels(as.factor(.$final_points)) %>%
ggplot(aes(factor(final_points), rot_pct)) +
geom_point()
#source(here("code", "kqf_clean.R"))
source(here("code", "kqf_analysis.R"))
nlme_coef <- read_csv(here("data", "kqf_nlme_coef - Sheet1.csv"))
View(nlme_coef)
nlme_coef %>%
ggplot(aes(month, temp)) + geom_point()
ggplot(aes(month, abs(temp)) +
nlme_coef %>%
ggplot(aes(month, abs(temp))) +
geom_point() +
scale_y_continuous()
nlme_coef %>%
nlme_coef %>%
ggplot(aes(month, abs(temp))) +
geom_point()
nlme_coef %>%
ggplot(aes(month, abs(as.numeric(temp)))) +
geom_point()
nlme_coef %>%
ggplot(aes(month %in% c(9,10,11), abs(as.numeric(temp)))) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0:10)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0.0:10.0)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = 0.0:10.0)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = month)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = precip)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point() +
scale_y_continuous(labels = scale(precip))
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_bar()
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_plots.R", echo=TRUE)
nlme_coef %>%
ggplot(aes(month, precip)) +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_line() +
geom_point()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_point() +
geom_line()
nlme_coef %>%
group_by(month) %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(month, precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
ylim(-10,10)
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), precip)) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point()
+
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
kqf_data_combined %>%
filter(rot_pct != 0 & data_source == "decas") %>%
ggplot(aes(log_rot)) +
geom_freqpoly()
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
stat_count() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
ggplot(aes(as.factor(month), as.numeric(precip)) +
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
sdf
nlme_coef %>%
filter(month %in% c(9,10,11)) %>%
ggplot(aes(as.factor(month), as.numeric(precip))) +
geom_point() +
scale_y_continuous(limits = c(-10,10), breaks = c(-10, -5, 0, 5, 10))
fruit_data_wide %>%
nest(-variety)
fruit_data_wide %>%
group_by(bog,grower)
fruit_data_wide %>%
group_by(bog)
1-pt(abs(-0.474), df = 30)
1-pt(abs(-0.474), df = 300)
1-pt(abs(-1.796), df = 30)
1-pt(abs(1.09), df = 30)
1-pt(abs(6.807), df = 30)
1-pt(abs(-8.425), df = 30)
1-pt(abs(-3.268), df = 30)
1-pt(abs(-1.796), df = 300)
summary(m_10)
1-pt(abs(-1.796), df = 2313)
1-pt(abs(-1.796), df = 398)
1-pt(abs(-1.796), df = 2312)
lme4::lmer(log_rot ~ temp_3 + precip_3 + (1 | bog),
data = fruit_data_wide)
lme4::lmer(log_rot ~ temp_12 + precip_12 + (1 | bog),
data = fruit_data_wide)
