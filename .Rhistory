levels(rot_by_kqf$final_points)
as.factor(rot_by_kqf$final_points)
kqf_data_combined$ingredient <- as_factor(kqf_data_combined$final_points)
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
droplevels(.) %>%
summarize(mean = mean(rot_pct, na.rm = T))
rot_by_kqf <- droplevels(rot_by_kqf$final_points)
rot_by_kqf <- droplevels(rot_by_kqf)
levels(rot_by_kqf)
levels(rot_by_kqf$final_points)
levels(rot_by_kqf$final_points)
rot_by_kqf <- droplevels(as.factor(rot_by_kqf))
rot_by_kqf <- (as.factor(rot_by_kqf))
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
summarize(mean = mean(rot_pct, na.rm = T))
rot_by_kqf <- (as.factor(rot_by_kqf))
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
summarize(mean = mean(rot_pct, na.rm = T))
rot_by_kqf <- (as.factor(rot_by_kqf$final_points))
View(rot_by_kqf)
#what are average rot percentages by kqf level?
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
summarize(mean = mean(rot_pct, na.rm = T))
kqf_data_combined$ingredient <- as_factor(kqf_data_combined$final_points)
glimpse(kqf_data_combined)
kqf_data_combined$final_points <- as_factor(kqf_data_combined$final_points)
glimpse(kqf_data_combined)
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
summarize(mean = mean(rot_pct, na.rm = T))
View(rot_by_kqf)
glimpse(rot_by_kqf)
droplevels(rot_by_kqf)
rot_by_kqf <- droplevels(rot_by_kqf)
rot_by_kqf <- droplevels(rot_by_kqf$final_points)
rot_by_kqf
rot_by_kqf <- kqf_data_combined %>%
group_by(final_points) %>%
summarize(mean = mean(rot_pct, na.rm = T))
lm(rot_by_kqf$final_points)
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
lm(kqf_data_combined$rot_pct ~ kqf_data_combined$final_points)
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
anova(lm(kqf_data_combined$rot_pct ~ kqf_data_combined$final_points))
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
anova(lm(kqf_data_combined$log_rot ~ kqf_data_combined$final_points))
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
rot_kqf_lm <- lm(kqf_data_combined$log_rot ~ kqf_data_combined$final_points)
color_kqf_lm <- lm(kqf_data_combined$color ~ kqf_data_combined$final_points)
summary(rot_kqf_lm)
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
plot(kqf_data_combined$final_points, kqf_data_combined$rot_pct)
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
plot(kqf_data_combined$rot_pct, kqf_data_combined$final_points, )
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
plot(kqf_data_combined$rot_pct, kqf_data_combined$final_points)
pairs(kqf_data_combined)
glimpse(kqf_data_combined)
kqf_int <- kqf_data_combined %>%
select(class(.) = "int")
kqf_int <- kqf_data_combined %>%
select(class(.) == "int")
kqf_int <- kqf_data_combined %>%
select(tacy,
absorbance,
log_rot,
debris,
color,
avg_temp_f,
tot_precip)
pairs(kqf_int)
?pairs
q
)
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
kqf_data_combined %>%
ggplot(aes(final_points, rot_pct)) +
geom_point()
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
kqf_data_combined %>%
ggplot(aes(as.factor(final_points), rot_pct)) +
geom_point()
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
kqf_data_combined %>%
filter(final_points != NA) %>%
ggplot(aes(as.factor(final_points), rot_pct)) +
geom_point()
#What is the value of the final KQF value as a general predictor of harvest quality (rot %, color, weight, etc.)?
kqf_data_combined %>%
filter(is.na(final_points) == F) %>%
ggplot(aes(as.factor(final_points), rot_pct)) +
geom_point()
install.packages("lme4")
package_version(lem4)
package_version(lme4)
package_version(dplyr)
package_version("base")
package_version(base)
install.packages("lme4")
library(lme4)
require(here)
source(here("code", "kqf_clean.R"))
View(kqf_data_combined)
lmer(final_points ~ log_rot + (log_rot | final_points),kqf_data_combined)
lmer(rot_pct ~ avg_temp_f +(tot_precip | final_points),kqf_data_combined)
lmer(rot_pct ~ final_points +(tot_precip | final_points),kqf_data_combined)
lmer(rot_pct ~ avg_temp_f +(tot_precip | final_points),kqf_data_combined)
obj <- lmer(rot_pct ~ avg_temp_f +(tot_precip | final_points),kqf_data_combined)
summary(obj)
obj2 <- lmer(rot_pct ~ avg_temp_f + tot_precip (1 | final_points),kqf_data_combined)
obj2 <- lmer(rot_pct ~ avg_temp_f + tot_precip + (1| final_points),kqf_data_combined)
summary(obj2)
View(kqf_data_combined)
kqf_data_combined %>%
filter(is.na(rot_pct) == F)
rot_kqf_vals <- kqf_data_combined %>%
filter(is.na(rot_pct) == F)
View(rot_kqf_vals)
unique(kqf_data_combined$month)
rot_kqf_vals <- kqf_data_combined %>%
filter(is.na(rot_pct) == F,
is.na(avg_temp_f) == F,
is.na(tot_precip) == F)
duplicated(rot_kqf_vals)
july <- rot_kqf_vals %>%
filter(month == 7)
View(july)
glimpse(rot_kqf_vals)
unique(kqf_data_combined$month)
july <- subset(rot_kqf_vals,month == 7)
july <- subset(rot_kqf_vals,month == 6)
rot_kqf_vals$month <- as.integer(rot_kqf_vals$month)
july <- subset(rot_kqf_vals, month == 7)
rot_kqf_vals$month <- as.integer(rot_kqf_vals$month)
glimpse(rot_kqf_vals)
july <- rot_kqf_vals %>%
filter(month == 7)
rot_kqf_vals$month == 7
rot_kqf_vals$month == 5
View(rot_kqf_vals)
class(rot_kqf_vals)
obj2 <- lmer(rot_pct ~ avg_temp_f + tot_precip + (1| final_points),kqf_data_combined)
summary(obj2)
random.effects
lme4::ranef(obj2)
july <- subset(rot_kqf_vals, month == 7)
july <- subset(rot_kqf_vals, month = 7)
View(july)
names(rot_kqf_vals)
install.packages("usethis")
require(usethis)
edit_git_config()
edit()
edit()
edit_rstudio_prefs()
edit_rstudio_snippets()
library(here)
library(tidyverse)
fread(here('data', My_file_name)
library(here)
library(tidyverse)
fread(here('my_file_folder', My_file_name))
library(here)
library(tidyverse)
fread(here('data', My_file_name))
library(here)
library(tidyverse)
fread(here('data', text.csv))
library(here)
library(data.table)
library(tidyverse)
fread(here('data', text.csv))
fruit_12 <- fread(here("data/base_files","grower_yield_rpt_2012.csv"))
pwider
#pivot
pwider
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(kqf_data_combined)
vis\
vis_dat(kqf_data_combined)
#pivot wider
kqf_data_wide <- kqf_data_combined %>%
filter(month = c(3:11))
#pivot wider
kqf_data_wide <- kqf_data_combined %>%
filter(month == c(3:11))
View(kqf_data_wide)
kqf_data_wide <- kqf_data_combined %>%
filter(month == c(1:12))
kqf_data_wide <- kqf_data_combined %>%
filter(month == c(3:11))
kqf_data_wide <- kqf_data_combined %>%
filter(is.na(month) == T)
View(kqf_data_wide)
View(kqf_data_combined)
kqf_data_wide <- kqf_data_combined %>%
filter(month == 10)
kqf_data_wide <- kqf_data_combined %>%
filter(is.na(month) == F)
glimpse(kqf_data_wide)
decas_data_wide <- kqf_data_combined %>%
filter(data_source == "decas",
is.na(month) == F)
View(decas_data_wide)
vis_dat(decas_data_wide)
#pivot wider
decas_data_wide <- kqf_data_combined %>%
filter(data_source == "decas",
is.na(month) == F,
is.na(rot_pct) == F)
vis_dat(decas_data_wide)
#pivot wider
decas_data_wide <- kqf_data_combined %>%
filter(data_source == "decas",
is.na(month) == F,
is.na(rot_pct) == F) %>%
select(grower, bog, variety, final_points,
debris, color, pre_points, rot_pct,
log_rot, year, month, avg_temp_f,
tot_precip, date)
vis_dat(decas_data_wide)
vis_cor(decas_data_wide)
glimpse(decas_data_wide)
decas_data_wide <- kqf_data_combined %>%
filter(data_source == "decas",
is.na(month) == F,
is.na(rot_pct) == F) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points)
decas_data_wide %>%
pivot_wider(# data frame/table name,
# id_cols = optional vector of unaffected columns,
names_from = c(grower),
values_from = c(-grower),
names_sep = "_"
)
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L)
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L) %>%
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L) %>%
arrange(n)
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L) %>%
arrange(n)
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L) %>%
arrange(desc(n))
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L,) %>%
arrange(desc(n))
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L,
year == 2014) %>%
arrange(desc(n))
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L,
year = 2014) %>%
arrange(desc(n))
decas_data_wide %>%
group_by(grower) %>%
summarise(n = n(), .groups = "drop") %>%
filter(n > 1L,
year == 2014) %>%
arrange(desc(n))
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
install.packages("nlme")
require(nlme)
#NLME
nlme(rot_pct ~ avg_temp_f + tot_preci,
data = decas_data_wide)
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip + (final_points | year),
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = final_points ~ year)
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip + (final_points | year),
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = final_points ~ year,
start = c(avg_temp_f = 50, tot_precip = 5))
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip ,
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = final_points ~ year,
start = c(avg_temp_f = 50, tot_precip = 5))
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip ,
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = final_points|year,
start = c(avg_temp_f = 50, tot_precip = 5))
View(decas_data_wide)
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip ,
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = decas_data_wide$final_points|year,
start = c(avg_temp_f = 50, tot_precip = 5))
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip ,
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = decas_data_wide$final_points~year,
start = c(avg_temp_f = 50, tot_precip = 5))
#NLME
nlme(rot_pct ~ avg_temp_f + tot_precip ,
data = decas_data_wide,
fixed = avg_temp_f + tot_precip ~ 1,
random = decas_data_wide$final_points,
start = c(avg_temp_f = 50, tot_precip = 5))
lme4::lmer(avg_temp_f ~ month + (tot_precip | year),
data = decas_data_wide)
lme4::lmer(rot_pct ~ month + (tot_precip || year),
data = decas_data_wide)
lme4::lmer(rot_pct ~ avg_temp_f + (tot_precip || year),
data = decas_data_wide)
#NLME
lme(rot_pct ~ avg_temp_f + (tot_precip || year),
data = decas_data_wide)
#NLME
lme(rot_pct ~ avg_temp_f + (tot_precip || year),
data = decas_data_wide)
lme4::lmer(avg_temp_f ~ month + (tot_precip || year),
data = decas_data_wide)
lme4::lmer(avg_temp_f ~ month + year +
(tot_precip | month),
data = decas_data_wide)
lme4::lmer(rot_pct ~ avg_temp_f + tot_precip + (tot_precip |  bog),
data = decas_data_wide,
#na.action =  na.omit(default),
)
lme4::lmer(avg_temp_f ~ month + (tot_precip || year),
data = decas_data_wide)
lme4::lmer(avg_temp_f ~ month + (tot_precip | year),
data = decas_data_wide)
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(decas_data_wide)
#
# #average rot percentage by variety
# rot_by_variety <- kqf_data_combined %>%
#   group_by(variety) %>%
#   summarize(mean = mean(rot_pct, na.rm = T))
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
#
# #average rot percentage by variety
# rot_by_variety <- kqf_data_combined %>%
#   group_by(variety) %>%
#   summarize(mean = mean(rot_pct, na.rm = T))
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T)) %>%
arrange()
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T)) %>%
arrange(variety)
#
# #average rot percentage by variety
# rot_by_variety <- kqf_data_combined %>%
#   group_by(variety) %>%
#   summarize(mean = mean(rot_pct, na.rm = T))
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct,
na.rm = T)) %>%
arrange(variety, .by_group = T)
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct,
na.rm = T)) %>%
arrange(variety, .by_group = T)
#
# #average rot percentage by variety
# rot_by_variety <- kqf_data_combined %>%
#   group_by(variety) %>%
#   summarize(mean = mean(rot_pct, na.rm = T))
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct,
na.rm = T)) %>%
arrange(mean, .by_group = T)
#
# #average rot percentage by variety
# rot_by_variety <- kqf_data_combined %>%
#   group_by(variety) %>%
#   summarize(mean = mean(rot_pct, na.rm = T))
decas_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct,
na.rm = T)) %>%
arrange(desc(mean), .by_group = T)
kqf_data_combined %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
duplicated(kqf_data_combined)
kqf_data_combined %>%
filter(data_source == "decas") %>%
duplicated()
decas_dupe <- kqf_data_combined %>%
filter(data_source == "decas",) %>%
duplicated()
decas_dupe <- decas_data_wide %>%
filter(data_source == "decas") %>%
duplicated()
decas_dupe <- decas_data_wide %>%
duplicated()
decas_dupe == T
count(decas_dupe)
count(decas_dupe == T)
class(decas_dupe)
table(decas_dupe)["TRUE"]
table(decas_dupe)["FALSE"]
dupes <- subset(decas_dupe == T)
dupes <- base::subset(decas_dupe == T)
dupes <- subset(decas_dupe, decas_dupe == T)
dupes <- decas_data_wide(duplicated(decas_data_wide))
dupes <- decas_data_wide[duplicated(decas_data_wide)]
View(dupes)
non_dupes <- decas_data_wide[!duplicated(decas_data_wide)]
View(non_dupes)
vis_dat(non_dupes)
table(duplicated(non_dupes) == F)
table(duplicated(non_dupes) == T)
table(duplicated(non_dupes))
non_dupes %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
non_dupes %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T)) %>%
arrange(desc(mean))
non_dupes %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T)) %>%
arrange(desc(mean), .by_group = T)
unique(non_dupes$year)
unique(non_dupes$month)
unique(as.factor(non_dupes$month))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(rot_pct, na.rm = T))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(rot_pct, na.rm = T)) %>%
arrange(desc(rot_pct))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(rot_pct, na.rm = T)) %>%
arrange(desc(mean))
non_dupes %>%
group_by(year) %>%arrange(desc(mean))
non_dupes %>%
group_by(year) %>%/arrange(desc(mean))
non_dupes %>%
group_by(year) %>%
arrange(desc(final_points))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(final_points, na.rm = T)) %>%
arrange(desc(mean))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(as.integer(final_points, na.rm = T)) %>%
arrange(desc(mean))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(as.integer(final_points, na.rm = T))) %>%
arrange(desc(mean))
non_dupes %>%
+        group_by(year) %>%
+        summarise(mean = mean(rot_pct, na.rm = T)) %>%
+     arrange(desc(mean))
non_dupes %>%
group_by(year) %>%
summarise(mean = mean(rot_pct, na.rm = T)) %>%
arrange(desc(mean))
source(here("code", "kqf_clean.R"))
require(here)
require(nlme)
source(here("code", "kqf_clean.R"))
library(here)
source("~/.active-rstudio-document", echo=TRUE)
