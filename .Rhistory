View(pest_cig)
View(decas_data_wide)
View(fruit_temp_combined)
View(fruit_temp_combined)
View(pest_temp_combined)
vis_dat(pest_temp_combined)
vis_dat(fruit_decas)
vis_dat(pest_temp_combined)
levels(pest_temp_combined$data_source)
levels(as.factor(pest_temp_combined$data_source))
View(pest_cig)
View(fruit_cig)
View(fruit_decas)
View(fruit_temp_combined)
View(pest_temp_combined)
View(fruit_decas)
View(pest_temp_combined)
pest_data_combined <- pest_data_combined %>%
full_join(points, by = c("year"))
pest_data_combined <- pest_temp_combined %>%
full_join(points, by = c("year"))
View(pest_data_combined)
pest_data_combined <- pest_temp_combined %>%
full_join(points, by = c("year")) %>%
select(-date_year)
rm(fruit_temp_combined,
pest_temp_combined,
points)
# rm(fruit_cig,
#    fruit_decas)
rm(fruit_comb,
lw_ctrl_cig)
rm(fruit_cig)
rm(pest_cig, pest_decas)
View(decas_data_wide)
View(fruit_decas)
#pivot wider
decas_data_wide <- fruit_decas %>%
filter(is.na(month) == F,
is.na(rot_pct) == F) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points)
#pivot wider
decas_data_wide <- kqf_data_combined %>%
filter(data_source == "decas",
is.na(month) == F,
is.na(rot_pct) == F) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
fruit_decas <- fruit_decas %>%
##exclude rows w/ NA values in rot
filter(is.na(rot_pct) == F) %>%
##create log_rot / year / month columns and collapse varieties by frequency
mutate(
log_rot = log10(rot_pct + 1) ,
variety = fct_collapse(variety, other = other_varieties),
year = lubridate::year(date),
month = lubridate::month(date),
##create data_source column
data_source = as.factor("decas")
) %>%
##relocate date column to [,1]
relocate(date) %>%
full_join(points, by = c("year")) %>%
select(-date_year)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
fruit_temp_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
select(-date.y) %>%
rename("date" = "date.x")
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_decas)
View(fruit_temp_combined)
View(points)
#kqf point values----
points <- points %>%
mutate(year = as.numeric(date_year)) %>%
select(-date_year)
fruit_temp_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
select(-date.y) %>%
rename("date" = "date.x") %<%
full_join(points, by = c("year"))
fruit_temp_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
select(-date.y) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year"))
View(fruit_temp_combined)
levels(as.factor($fruit_temp_combined$data_source))
levels(as.factor(fruit_temp_combined$data_source))
rm(pest_cig, pest_decas)
rm(pest_comb,
fungicide_use,
comb_pest_cols)
rm(other_ingredients,
other_varieties,
comb_cols,
temp_precip)
rm(fruit_cig)
rm(fruit_comb,
lw_ctrl_cig)
rm(fruit_temp_combined,
pest_temp_combined,
points)
source("~/.active-rstudio-document", echo=TRUE)
rm(fruit_cig,
lw_ctrl_cig)
source("~/.active-rstudio-document", echo=TRUE)
rm(lw_ctrl_cig)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
rm(lw_ctrl_cig,
fruit_cig)
View(pest_data_combined)
View(fruit_decas)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_temp_combined)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year")) %>%
select(-date.y,
-debris,
-data_source)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_data_combined)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
vis_dat(fruit_data_combined)
vis_dat(pest_data_combined)
duplicated(fruit_data_combined)
duplicated(pest_data_combined)
fruit_data_combined <- fruit_decas %>%
full_join(temp_precip, by = c("year", "month")) %>%
rename("date" = "date.x") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points)
source("~/.active-rstudio-document", echo=TRUE)
pest_temp_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year"))
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_data_combined)
View(pest_data_combined)
pest_temp_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
View(pest_data_combined)
pest_data_combined <- fungicide_use %>%
full_join(temp_precip, by = c("year", "month"), suffix = c("_fungi", "_temps")) %>%
select(-date_temps) %>%
rename("date" = "date_fungi") %>%
full_join(points, by = c("year")) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog,
pre_points,final_points)
source("~/.active-rstudio-document", echo=TRUE)
View(fruit_data_combined)
View(pest_data_combined)
vis_dat(pest_data_combined)
duplicated(pest_data_combined)
subset(pest_data_combined, duplicated(pest_data_combined) == T)
dupes <- subset(pest_data_combined, duplicated(pest_data_combined) == T)
View(dupes)
glimpse(dupes)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
lme4::lmer(rot_pct ~ avg_temp_f + (tot_precip || year),
data = fruit_data_combined)
rot_by_variety <- kqf_data_combined %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
fruit_data_combined %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct,
na.rm = T)) %>%
arrange(desc(mean), .by_group = T)
fruit_data_combined
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
View(rot_by_variety)
lme4::lmer(rot_pct ~ avg_temp_f + tot_precip + (tot_precip |  bog),
data = fruit_data_combined,
#na.action =  na.omit(default),
)
vis_cor(fruit_data_combined)
glimpse(fruit_data_combined)
ggpairs
ggpairs()
install.packages("GGally")
library(GGally)
kqf_pairs <- ggpairs(kqf_int)
kqf_int <- fruit_data_combined %>%
select(tacy,
absorbance,
log_rot,
debris,
color,
avg_temp_f,
tot_precip,
final_points)
#pairs plot numeric vis
kqf_int <- fruit_data_combined %>%
select(
absorbance,
log_rot,
debris,
color,
avg_temp_f,
tot_precip,
final_points)
#pairs plot numeric vis
kqf_int <- fruit_data_combined %>%
select(
log_rot,
debris,
color,
avg_temp_f,
tot_precip,
final_points)
#pairs plot numeric vis
kqf_int <- fruit_data_combined %>%
select(
log_rot,
color,
avg_temp_f,
tot_precip,
final_points)
kqf_pairs <- ggpairs(kqf_int)
View(kqf_pairs)
kqf_pairs
warnings()
library(here)
library(nlme)
library(GGally)
source(here("code", "kqf_clean.R"))
#NLME
lme4::lmer(rot_pct ~ avg_temp_f + (tot_precip || year),
data = fruit_data_combined)
lme4::lmer(avg_temp_f ~ month + (tot_precip | year),
data = fruit_data_combined)
#temperature by temporal factors w/ precip g/month as RE
lme4::lmer(avg_temp_f ~ month + year + (tot_precip | month),
data = fruit_data_combined)
#rot_pct by climate factors w/ precip grouped by bog as RE
lme4::lmer(rot_pct ~ avg_temp_f + tot_precip + (tot_precip |  bog),
data = fruit_data_combined,
#na.action =  na.omit(default),
)
#rot_pct by climate factors w/ precip grouped by bog as RE
lme4::lmer(rot_pct ~ avg_temp_f + tot_precip + (1 |  bog),
data = fruit_data_combined,
#na.action =  na.omit(default),
)
#temperature by temporal factors w/ precip g/month as RE
lme4::lmer(avg_temp_f ~ month + year + (1 | month),
data = fruit_data_combined)
lme4::lmer(avg_temp_f ~ month + tot_precip + (1| year),
data = fruit_data_combined)
lme4::lmer(avg_temp_f ~ month + tot_precip + (1| year[2013:2018]),
data = fruit_data_combined)
snippets.
snippets.r
lmer(final_points ~ avg_temp_f + tot_precip + rot_pct + (1 | bog),
data = fruit_data_combined)
library(lme4)
lmer(final_points ~ avg_temp_f + tot_precip + rot_pct + (1 | bog),
data = fruit_data_combined)
View(fruit_data_combined)
lmer(final_points ~ avg_temp_f + tot_precip + rot_pct + (grower | bog),
data = fruit_data_combined)
lmer(final_points ~ avg_temp_f + tot_precip + rot_pct + (1 | grower),
data = fruit_data_combined)
lmer(final_points ~ avg_temp_f + tot_precip + rot_pct + (1 | bog),
data = fruit_data_combined)
lmer(final_points ~ avg_temp_f + tot_precip + (1 | bog),
data = fruit_data_combined)
View(fruit_data_combined)
lmer(final_points ~ scale(fruit_data_combined$avg_temp_f) + scale(fruit_data_combined$tot_precip) + (1 | bog),
data = fruit_data_combined)
View(fruit_data_combined)
lmer(log_rot ~ scale(fruit_data_combined$avg_temp_f) + scale(fruit_data_combined$tot_precip) + (1 | bog),
data = fruit_data_combined)
ab1 <- lmer(log_rot ~ scale(fruit_data_combined$avg_temp_f) + scale(fruit_data_combined$tot_precip) + (1 | bog),
data = fruit_data_combined)
summary(ab1)
qqnorm(resid(ab1))
qqline(resid(ab1))
shapiro(resid(ab1))
shapiro.test(resid(ab1))
hist(resid(ab1))
ab1 <- lmer(rot_pct ~ scale(fruit_data_combined$avg_temp_f) + scale(fruit_data_combined$tot_precip) + (1 | bog),
data = fruit_data_combined)
qqnorm(resid(ab1))
qqline(resid(ab1))
hist(resid(ab1))
View(pest_data_combined)
subset(fruit_data_combined, grower == "Bett01")
subset(fruit_data_combined, grower == "Bett01" & bog == 1)
lmer(log_rot ~ scale(fruit_data_combined$avg_temp_f) + scale(fruit_data_combined$tot_precip) (1 | year),
data = fruit_data_combined)
install.packages("RPostgreSQL")
gc()
library(tidyverse)
library(data.table)
library(lubridate)
library(visdat)
library(here)
library(forcats)
source(here("code", "kqf_import.R"))
source("C:/Users/User/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
View(fruit_data_wide)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year ,month,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points,
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
avg_temp_f, tot_precip,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points,
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points,final_points,
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
View(fruit_data_wide)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points, final_points,
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
View(fruit_data_wide)
vis_dat(fruit_data_wide)
lme4::lmer(rot_pct ~ precip_10 + (tot_precip || year),
data = fruit_data_wide)
lme4::lmer(rot_pct ~ temp_10 + (precip_10 || year),
data = fruit_data_wide)
lme4::lmer(temp_10 ~ month + (precip_10 | year),
data = fruit_data_combined)
lme4::lmer(temp_10 ~ month + (precip_10 | year),
data = fruit_data_wide)
lme4::lmer( log_rot ~ temp_10 + (precip_10 | year),
data = fruit_data_wide)
lme4::lmer(avg_temp_f ~ month + year + (tot_precip | month),
data = fruit_data_combined)
lme4::lmer( log_rot ~ temp_10 + precip_10 +(1 | year),
data = fruit_data_wide)
lme4::lmer( log_rot ~ temp_10 + precip_10 +(1 | variety),
data = fruit_data_wide)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
grower, bog, variety,
color, rot_pct, log_rot,
pre_points, final_points,
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
vis_dat(fruit_data_wide)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
grower, bog, variety,
color, rot_pct, log_rot,
as.factor(pre_points), as.factor(final_points),
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
fruit_data_wide <- fruit_data_unique %>%
pivot_wider(names_from =  month,
names_prefix = "temp_",
values_from = avg_temp_f) %>%
pivot_wider(names_from = month_2,
names_prefix = "precip_",
values_from = tot_precip) %>%
select(date, year,
grower, bog, variety,
color, rot_pct, log_rot, as.factor(final_points),
temp_9, temp_10, temp_11, temp_12,
precip_9, precip_10, precip_11, precip_12)
fruit_data_wide$pre_points <- as.factor(fruit_data_wide$pre_points)
fruit_data_wide$final_points <- as.factor(fruit_data_wide$final_points)
vis_dat(fruit_data_wide)
levels(fruit_data_wide$final_points)
droplevels(fruit_data_wide$final_points)
glimpse(fruit_data_wide)
mean(fruit_data_wide$temp_10, na.omit)
mean(fruit_data_wide$temp_10,
na.rm = T)
medain(fruit_data_wide$temp_10,
na.rm = T)
median(fruit_data_wide$temp_10,
na.rm = T)
average(fruit_data_wide$temp_10,
na.rm = T)
git log
source(here("code", "kqf_clean.R"))
library(tidyverse)
library(data.table)
library(lubridate)
library(visdat)
library(here)
library(forcats)
source(here("code", "kqf_import.R"))
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_clean.R", echo=TRUE)
source(here("code", "kqf_import.R"))
anti_join(fruit_decas, fruit_data_wide, by = c(bog))
anti_join(fruit_decas, fruit_data_wide, by = c("bog"))
anti_join(fruit_data_wide, fruit_decas, by = c("bog"))
anti_join(fruit_data_wide, fruit_decas, by = c("grower"))
anti_join(fruit_data_wide, fruit_decas, by = c("rot_pct"))
source("C:/Users/user/OneDrive - University of Massachusetts/kqf_project/code/kqf_analysis.R", echo=TRUE)
#
#average rot percentage by variety
rot_by_variety <- fruit_data_combined %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
fruit_data_combined %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
fruit_data_wide %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
fruit_data_wide %>%
filter(is.na(rot_pct) == F) %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
fruit_data_combined %>%
filter(is.na(rot_pct) == F) %>%
group_by(variety) %>%
summarize(mean = mean(rot_pct, na.rm = T))
